var productCardPrice,productCardAmount,totalSum,totalProductSumField,totalCartSum,serviceCheckedOptions,totalProductsCardSum=0,totalCartSumField=$(".make-order-block__total-price");function setProductCardSum(){totalSum=(productCardPrice*productCardAmount).toFixed(2),totalProductSumField.attr("data-cart-product-sum",totalSum),totalProductSumField.text(totalSum)}function calculateTotalProductsCardSum(){totalProductsCardSum=0,$(".in-cart__sum").each((function(){totalProductsCardSum+=+$(this).attr("data-cart-product-sum")}))}var servicesTotalPrice=0;function calculateTotalServicesPrice(){servicesTotalPrice=0,serviceCheckedOptions=$("input[type='checkbox'][name='select-service']:checked"),$("input[type='checkbox'][name='select-service']:checked").each((function(){servicesTotalPrice+=+$(this).attr("data-servive-price")}))}function calculateTotalCartSum(){totalCartSum=(totalProductsCardSum+servicesTotalPrice).toFixed(2),totalCartSumField.attr("data-goods-total-price",totalCartSum),totalCartSumField.text(totalCartSum)}$("input[type='checkbox'][name='select-service']").on("change",(function(){calculateTotalServicesPrice(),calculateTotalCartSum()})),$(".in-cart__list").each((function(){productCardPrice=$(this).find(".in-cart__price").attr("data-cart-product-price"),productCardAmount=$(this).find(".in-cart__amount").val(),totalProductSumField=$(this).find(".in-cart__sum"),setProductCardSum()})),$(".in-cart__minus-button").on("click",(function(){var t=$(this).next();if(productCardAmount=$(this).next().val(),productCardPrice=$(this).parent().parent().parent().find(".in-cart__price").attr("data-cart-product-price"),totalProductSumField=$(this).parent().parent().parent().find(".in-cart__sum"),1==productCardAmount)return productCardAmount;productCardAmount--,t.attr("value",productCardAmount),setProductCardSum(),calculateTotalProductsCardSum(),calculateTotalCartSum()})),$(".in-cart__plus-button").on("click",(function(){var t=$(this).prev();productCardAmount=$(this).prev().val(),productCardPrice=$(this).parent().parent().parent().find(".in-cart__price").attr("data-cart-product-price"),totalProductSumField=$(this).parent().parent().parent().find(".in-cart__sum"),productCardAmount++,t.attr("value",productCardAmount),setProductCardSum(),calculateTotalProductsCardSum(),calculateTotalCartSum()})),0===$(".in-cart__content").length&&$("#in-cart__cart-form").html('<p class="in-cart__empty-cart-message">Корзина пуста!</p>');var goodsInCartAmount=0;function setGoodsInCartAmount(){goodsInCartAmount=$(".in-cart__list_product-cart").length,$(".order-block__ordered-amount").text(goodsInCartAmount),$(".make-order-block__goods-amount-number").text(goodsInCartAmount),$(".make-order-block__goods-amount-number").attr("data-total-goods-amount",goodsInCartAmount),$(".header-bottom__in-cart-amount").text(goodsInCartAmount)}function showPopup(t){$("body").css("overflow","hidden"),$(t).fadeIn(300),$("body").css("padding-right","17px")}function closePopup(){$("body").css("overflow","auto"),$("body").css("padding-right","0px"),$(".popup").fadeOut(0)}setGoodsInCartAmount(),$(".in-cart__del-button").on("click",(function(){$(this).parent().parent().parent().remove(),calculateTotalProductsCardSum(),goodsInCartAmount--,setGoodsInCartAmount(),calculateTotalCartSum(),""==$(".in-cart__content").html().trim()&&($("#in-cart__cart-form").html('<p class="in-cart__empty-cart-message">Корзина пуста!</p>'),$(".make-order-block__select-option-checkbox").removeAttr("checked"),totalCartSum=0,totalCartSumField.attr("data-goods-total-price",totalCartSum),totalCartSumField.text(totalCartSum),$(".make-order-block__select-option-checkbox").attr("disabled","disabled"),$(".make-order-block__button").addClass("disabled"))})),calculateTotalProductsCardSum(),calculateTotalServicesPrice(),calculateTotalCartSum(),jQuery(document).ready((function(){jQuery("#order-call-client-phone").mask("+375 (99) 999-99-99")})),$(".header-bottom__burger-menu-open-button").click((function(){$(".header-bottom__open-button-bar").toggleClass("active"),$(".header-bottom__open-button-bar").hasClass("active")&&$("body").css("overflow","hidden")})),$(".menu-section__background-mobile").click((function(){$(".header-bottom__burger-menu-open-button").trigger("click")})),$(".popup__close-button").click(closePopup),$(document).mouseup((function(t){var o=$(".popup__block"),a=$(".menu-block");t.target!=a[0]&&0===a.has(t.target).length&&t.target!=o[0]&&0===o.has(t.target).length&&closePopup()})),$(".header-bottom__order-call-button").click((function(t){showPopup(".popup_order-call")})),$("#order-call").submit((function(t){return t.preventDefault(),closePopup(),$(".popup__headline_thanks").text("Спасибо за заказ звонка!"),$(".popup__text_thanks").text("Наши специалисты свяжутся с вами в ближайшее время"),showPopup(".popup_thanks"),$.ajax({type:"POST",url:"mail.php",data:$(this).serialize(),success:function(){closePopup(),$(".popup__headline_thanks").text("Спасибо за заказ звонка!"),$(".popup__text_thanks").text("Наши специалисты свяжутся с вами в ближайшее время"),showPopup(".popup_thanks"),$(this).find("input").val(""),$(this).trigger("reset")},error:function(){}}),!1})),$(".footer-block__email-form").submit((function(t){return t.preventDefault(),$(".popup__headline_info").text("Спасибо за подписку!"),$(".popup__button_info").text("Закрыть"),showPopup(".popup_info"),$(".popup__button_info").click((function(t){t.preventDefault(),$(this).attr("href","#"),closePopup()})),$.ajax({type:"POST",url:"mail.php",data:$(this).serialize(),success:function(){$(".popup__headline_info").text("Спасибо за подписку!"),$(".popup__button_info").text("Закрыть"),showPopup(".popup_info"),$(".popup__button_info").click((function(t){t.preventDefault(),$(this).attr("href","#"),closePopup(),$(this).find("input").val(""),$(this).trigger("reset")}))},error:function(){}}),!1}));